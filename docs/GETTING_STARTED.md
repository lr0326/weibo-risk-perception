# ğŸš€ é¡¹ç›®å¼€å‘å…¥é—¨æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**åŸºäºå¾®åšæ•°æ®çš„ç¤¾ä¼šé£é™©æ„ŸçŸ¥ä¸èˆ†æƒ…é¢„æµ‹ç³»ç»Ÿ**ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

1. **æ•°æ®é‡‡é›†** - é‡‡é›†å¾®åšæ•°æ®ï¼ˆæ”¯æŒAPI/çˆ¬è™«/æ¨¡æ‹Ÿæ•°æ®ï¼‰
2. **æ–‡æœ¬é¢„å¤„ç†** - æ¸…æ´—ã€åˆ†è¯ã€ç‰¹å¾æå–
3. **æƒ…æ„Ÿåˆ†æ** - è¯†åˆ«æ–‡æœ¬æƒ…æ„Ÿææ€§å’Œæƒ…ç»ª
4. **é£é™©è¯„ä¼°** - å¤šç»´åº¦é£é™©æ„ŸçŸ¥è¯„ä¼°
5. **è¶‹åŠ¿é¢„æµ‹** - LSTMæ—¶é—´åºåˆ—é¢„æµ‹
6. **ç¾¤ä½“èšç±»** - ç”¨æˆ·ç”»åƒå’Œç¾¤ä½“ç»†åˆ†
7. **å¯è§†åŒ–** - äº¤äº’å¼ä»ªè¡¨ç›˜å’ŒæŠ¥å‘Šç”Ÿæˆ

---

## ğŸ“‹ å¼€å‘æµç¨‹å»ºè®®

### é˜¶æ®µä¸€ï¼šç†Ÿæ‚‰é¡¹ç›®ç»“æ„ï¼ˆå½“å‰é˜¶æ®µï¼‰

```bash
# 1. è¿è¡ŒåŸºç¡€ç¤ºä¾‹
conda activate jikong_sentiment
cd "H:\åŸºäºå¾®åšæ•°æ®çš„ç¤¾ä¼šé£é™©æ„ŸçŸ¥ä¸èˆ†æƒ…é¢„æµ‹ç³»ç»Ÿ"
python examples/basic_usage.py

# 2. è¿è¡Œå®Œæ•´åˆ†ææµç¨‹ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
python main.py analyze --mock --count 100

# 3. å¯åŠ¨å¯è§†åŒ–ä»ªè¡¨ç›˜
python main.py dashboard --port 8050
```

### é˜¶æ®µäºŒï¼šå‡†å¤‡çœŸå®æ•°æ®

#### æ–¹å¼1ï¼šä½¿ç”¨å¾®åšAPIï¼ˆæ¨èï¼‰
1. æ³¨å†Œå¾®åšå¼€å‘è€…è´¦å·ï¼šhttps://open.weibo.com/
2. åˆ›å»ºåº”ç”¨è·å– `access_token`
3. é…ç½® `config/api_config.yaml`
4. è¿è¡Œæ•°æ®é‡‡é›†

#### æ–¹å¼2ï¼šä½¿ç”¨çˆ¬è™«ï¼ˆå¤‡é€‰ï¼‰
1. ä¿®æ”¹ `src/data_collection/weibo_collector.py` ä¸­çš„çˆ¬è™«é…ç½®
2. æ³¨æ„ï¼šçˆ¬è™«å¯èƒ½è¿åå¾®åšä½¿ç”¨æ¡æ¬¾ï¼Œå»ºè®®ä»…ç”¨äºå­¦æœ¯ç ”ç©¶

#### æ–¹å¼3ï¼šä½¿ç”¨ç°æœ‰æ•°æ®é›†
1. å‡†å¤‡CSVæ ¼å¼çš„å¾®åšæ•°æ®
2. å¿…éœ€å­—æ®µï¼š`content`, `created_at`
3. å¯é€‰å­—æ®µï¼š`user_id`, `user_name`, `reposts_count`, `comments_count`, `attitudes_count`

### é˜¶æ®µä¸‰ï¼šæ¨¡å‹è®­ç»ƒä¸ä¼˜åŒ–

1. **æƒ…æ„Ÿåˆ†ææ¨¡å‹**
   - å½“å‰ä½¿ç”¨ SnowNLPï¼ˆæ— éœ€è®­ç»ƒï¼‰
   - å¯åˆ‡æ¢åˆ° BERTï¼ˆéœ€GPUï¼Œæ•ˆæœæ›´å¥½ï¼‰

2. **è¶‹åŠ¿é¢„æµ‹æ¨¡å‹**
   - LSTM è‡ªåŠ¨è®­ç»ƒ
   - è°ƒæ•´å‚æ•°ï¼š`config/config.yaml` -> `models.lstm`

3. **é£é™©è¯„ä¼°æ¨¡å‹**
   - è°ƒæ•´é£é™©ç»´åº¦æƒé‡
   - è‡ªå®šä¹‰é£é™©å…³é”®è¯

### é˜¶æ®µå››ï¼šéƒ¨ç½²ä¸åº”ç”¨

1. å®šæ—¶ä»»åŠ¡é‡‡é›†æ•°æ®
2. å®æ—¶ç›‘æ§ä»ªè¡¨ç›˜
3. é¢„è­¦é€šçŸ¥ç³»ç»Ÿ

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„è¯´æ˜

```
weibo-risk-perception/
â”œâ”€â”€ main.py                    # ä¸»å…¥å£ï¼Œæ”¯æŒå‘½ä»¤è¡Œå‚æ•°
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ config.yaml            # ä¸»é…ç½®æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰
â”‚   â””â”€â”€ api_config.yaml.template  # APIé…ç½®æ¨¡æ¿
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pipeline.py            # å®Œæ•´åˆ†ææµæ°´çº¿
â”‚   â”œâ”€â”€ data_collection/       # æ•°æ®é‡‡é›†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ weibo_collector.py # å¾®åšé‡‡é›†å™¨
â”‚   â”‚   â””â”€â”€ stream_collector.py# å®æ—¶æµé‡‡é›†
â”‚   â”œâ”€â”€ preprocessing/         # é¢„å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ text_cleaner.py    # æ–‡æœ¬æ¸…æ´—
â”‚   â”‚   â””â”€â”€ feature_extractor.py # ç‰¹å¾æå–
â”‚   â”œâ”€â”€ analysis/              # åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ sentiment_analyzer.py # æƒ…æ„Ÿåˆ†æ
â”‚   â”‚   â”œâ”€â”€ risk_perception.py    # é£é™©æ„ŸçŸ¥
â”‚   â”‚   â””â”€â”€ network_analysis.py   # ç½‘ç»œåˆ†æ
â”‚   â”œâ”€â”€ models/                # æ¨¡å‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ risk_model.py      # é£é™©åˆ†ç±»æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ prediction_model.py# LSTMé¢„æµ‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ clustering.py      # èšç±»æ¨¡å‹
â”‚   â”œâ”€â”€ visualization/         # å¯è§†åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ dashboard.py       # Dashä»ªè¡¨ç›˜
â”‚   â”‚   â””â”€â”€ report_generator.py# æŠ¥å‘Šç”Ÿæˆ
â”‚   â””â”€â”€ utils/                 # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ helpers.py         # è¾…åŠ©å‡½æ•°
â”‚       â”œâ”€â”€ logger.py          # æ—¥å¿—é…ç½®
â”‚       â””â”€â”€ database.py        # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ dictionaries/          # è¯å…¸æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ stop_words.txt     # åœç”¨è¯
â”‚   â”‚   â””â”€â”€ user_dict.txt      # ç”¨æˆ·è¯å…¸
â”‚   â”œâ”€â”€ raw/                   # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ processed/             # å¤„ç†åæ•°æ®
â”‚   â”œâ”€â”€ models/                # è®­ç»ƒå¥½çš„æ¨¡å‹
â”‚   â””â”€â”€ outputs/               # è¾“å‡ºç»“æœ
â”œâ”€â”€ examples/                  # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ scripts/                   # è¿è¡Œè„šæœ¬
â””â”€â”€ tests/                     # æµ‹è¯•ç”¨ä¾‹
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate jikong_sentiment

# è¿›å…¥é¡¹ç›®ç›®å½•
cd "H:\åŸºäºå¾®åšæ•°æ®çš„ç¤¾ä¼šé£é™©æ„ŸçŸ¥ä¸èˆ†æƒ…é¢„æµ‹ç³»ç»Ÿ"

# ========== åˆ†æå‘½ä»¤ ==========
# ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è¿è¡Œåˆ†æ
python main.py analyze --mock --count 100

# ä½¿ç”¨çœŸå®æ•°æ®è¿è¡Œåˆ†æ
python main.py analyze --input data/raw/your_data.csv

# ========== ä»ªè¡¨ç›˜å‘½ä»¤ ==========
# å¯åŠ¨ä»ªè¡¨ç›˜ï¼ˆé»˜è®¤ç«¯å£8050ï¼‰
python main.py dashboard

# æŒ‡å®šç«¯å£
python main.py dashboard --port 8888 --debug

# ========== æ•°æ®é‡‡é›†å‘½ä»¤ ==========
# é‡‡é›†æ¨¡æ‹Ÿæ•°æ®
python scripts/run_collection.py --mock --count 500

# ========== æµ‹è¯•å‘½ä»¤ ==========
# è¿è¡Œæµ‹è¯•
python -m pytest tests/ -v
```

---

## ğŸ“Š é…ç½®æ–‡ä»¶è¯´æ˜

ä¸»é…ç½®æ–‡ä»¶ `config/config.yaml` çš„é‡è¦é…ç½®é¡¹ï¼š

```yaml
# æ¨¡å‹é…ç½®
models:
  sentiment:
    model_type: "snownlp"    # å¯é€‰: snownlp, bert
  
  lstm:
    hidden_dim: 128          # LSTMéšè—å±‚ç»´åº¦
    sequence_length: 24      # æ—¶é—´åºåˆ—é•¿åº¦
    epochs: 100              # è®­ç»ƒè½®æ•°
  
  risk_perception:
    dimensions:              # é£é™©ç»´åº¦
      - health_risk
      - economic_risk
      - social_risk
      - political_risk
    weights:                 # ç»´åº¦æƒé‡
      health_risk: 0.30
      economic_risk: 0.25
      social_risk: 0.25
      political_risk: 0.20

# é¢„è­¦é˜ˆå€¼
warning:
  thresholds:
    risk_score:
      low: 30
      medium: 50
      high: 70
      critical: 85
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **å¦‚æœä½ æƒ³å…ˆäº†è§£æ•°æ®å¤„ç†æµç¨‹**ï¼š
   - æŸ¥çœ‹ `examples/basic_usage.py`
   - é˜…è¯» `src/preprocessing/` ä¸‹çš„ä»£ç 

2. **å¦‚æœä½ æƒ³è‡ªå®šä¹‰æƒ…æ„Ÿåˆ†æ**ï¼š
   - ä¿®æ”¹ `src/analysis/sentiment_analyzer.py`
   - æ·»åŠ æ›´å¤šæƒ…æ„Ÿè¯å…¸

3. **å¦‚æœä½ æƒ³è°ƒæ•´é£é™©è¯„ä¼°é€»è¾‘**ï¼š
   - ä¿®æ”¹ `src/analysis/risk_perception.py`
   - è‡ªå®šä¹‰é£é™©å…³é”®è¯å’Œç»´åº¦

4. **å¦‚æœä½ æƒ³å‡†å¤‡çœŸå®æ•°æ®**ï¼š
   - é…ç½® `config/api_config.yaml`
   - æˆ–å‡†å¤‡è‡ªå·±çš„CSVæ•°æ®

5. **å¦‚æœä½ æƒ³å¯åŠ¨å¯è§†åŒ–**ï¼š
   - è¿è¡Œ `python main.py dashboard`
   - è®¿é—® http://localhost:8050

---

## â“ å¸¸è§é—®é¢˜

**Q: å¦‚ä½•ä½¿ç”¨è‡ªå·±çš„æ•°æ®ï¼Ÿ**
A: å‡†å¤‡CSVæ–‡ä»¶ï¼ŒåŒ…å« `content` å’Œ `created_at` å­—æ®µï¼Œæ”¾å…¥ `data/raw/` ç›®å½•

**Q: å¦‚ä½•è°ƒæ•´é£é™©è¯„ä¼°çš„æ•æ„Ÿåº¦ï¼Ÿ**
A: ä¿®æ”¹ `config/config.yaml` ä¸­çš„ `warning.thresholds.risk_score`

**Q: å¦‚ä½•æ·»åŠ æ–°çš„é£é™©å…³é”®è¯ï¼Ÿ**
A: ä¿®æ”¹ `src/analysis/risk_perception.py` ä¸­çš„ `_load_risk_keywords` æ–¹æ³•

**Q: æ•°æ®é‡å¤šå°‘åˆé€‚ï¼Ÿ**
A: å»ºè®®è‡³å°‘100æ¡ä»¥ä¸Šæ•°æ®ï¼Œè¶‹åŠ¿é¢„æµ‹éœ€è¦è‡³å°‘50æ¡æ—¶åºæ•°æ®

---

ç¥ä½ å¼€å‘é¡ºåˆ©ï¼ğŸ‰

